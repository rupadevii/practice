<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gallery</title>
    <style>
        body{
            padding: 0;
            margin: 0;
        }

        main{
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: rgb(35, 34, 34);
        }

        .container{
            border: 2px solid black;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background-color: white;
            padding: 40px 10px;
        }

        .image-container{
            display: flex;
            align-items: center;
            gap: 10px;
        }

        ul{
            display: flex;
            list-style: none;
        }

        ul li img{
            opacity: 0.5;
        }

        ul li .active{
            opacity: 1;
            border: 2px solid black;
        }

        img{
            height: 500px;
        }

        button{
            padding: 20px 10px;
            cursor: pointer;
            background-color: black;
            color: white;
            border-radius: 5px;
        }

        button:hover{
            background-color: rgb(65, 63, 63);
        }

        button:disabled{
            background-color: rgb(233, 231, 231);
            color: white;
        }

    </style>
</head>
<body>
    <main>
        <div class="container">
            <div class="image-container">
                <button id="previous"><</button>
                <img class="image" data-image="3" src="images/Purple.jpg" alt="purple"/>
                <button id="next">></button>
            </div>
            <div class="images-preview">
            </div>
        </div>
    </main>

    <script>
        const images = [
            {   
                id: 1,
                src: "images/Blue.jpg",
                alt:"blue"
            },
            {   
                id: 2,
                src: "images/Pink.jpg",
                alt:"pink"
            },
            {   
                id: 3,
                src: "images/Purple.jpg",
                alt:"purple"
            },
            {   
                id: 4,
                src: "images/Green.jpg",
                alt:"green"
            },
            {   
                id: 5,
                src: "images/Gray.png",
                alt:"gray"
            },
        ]
        
        class gallery{
            constructor(container){
                this.container = container;

                this.buttons = container.querySelectorAll('button')
                this.prevButton = container.querySelector('#previous');
                this.nextButton = container.querySelector('#next');
                this.allImages = container.querySelector('.images-preview');
                this.image = container.querySelector('img')
                
                // this.getChildren()
                this.bind();
                this.displayPreview();
            }
            
            bind(){
                this.buttons.forEach(button => button.addEventListener("click", (e) => this.switchImage(e)))
            }

            displayPreview(){
                const ul = document.createElement('ul');
    
                images.forEach(element => {
                    const li = document.createElement('li');
                    const img = document.createElement('img');
                    img.src = element.src;
                    img.id = element.id;
                    img.style.height = "50px";
                    img.setAttribute("data-image", element.id);

                    if(element.alt === "purple") img.className = "active"
                    li.append(img);
                    ul.append(li);
                })

                this.allImages.append(ul);
            }
            
            switchImage(e){
                let currImage = Number(this.image.getAttribute("data-image"));
                const previewImages = this.allImages.querySelectorAll('img');
                
                previewImages.forEach(element => element.classList.remove('active'))
                
                if(e.target.id === "previous"){
                    this.nextButton.disabled = false

                    if(currImage > 1) {
                        currImage -= 1;

                        if(currImage === 1){
                            e.target.disabled = true
                        }
                    }
                }

                if(e.target.id === "next"){
                    this.prevButton.disabled = false

                    if(currImage < 5) {
                        currImage += 1;
        
                        if(currImage === 5){
                            e.target.disabled = true
                        }
                    }
                }

                const currPreviewImage = this.allImages.querySelector(`[data-image="${currImage}"]`)
                currPreviewImage.classList.add('active');

                const newImage = images.filter(element => element.id == currImage)[0];
                this.image.setAttribute("data-image", currImage)
                this.image.src = newImage.src;
                this.image.alt = newImage.alt;
            }
            
        }

        const container = document.querySelector('.container');

        new gallery(container);

    </script>
</body>
</html>